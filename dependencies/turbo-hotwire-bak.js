/*
Turbo 7.1.0
Copyright Â© 2021 Basecamp, LLC
 */

/**
 * The MIT License (MIT)
 * 
 * Copyright (c) 2019 Javan Makhmali
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */

!function(){if(void 0===window.Reflect|| void 0===window.customElements||window.customElements.polyfillWrapFlushCallback)return;let a=HTMLElement;window.HTMLElement=({HTMLElement:function(){return Reflect.construct(a,[],this.constructor)}}).HTMLElement,HTMLElement.prototype=a.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,a)}(),function(a){function b(a,b,c){throw new a("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+b+".",c)}"function"!=typeof a.requestSubmit&&(a.requestSubmit=function(a){var c,d;a?(c=a,d=this,c instanceof HTMLElement||b(TypeError,"parameter 1 is not of type 'HTMLElement'"),"submit"==c.type||b(TypeError,"The specified element is not a submit button"),c.form==d||b(DOMException,"The specified element is not owned by this form element","NotFoundError"),a.click()):((a=document.createElement("input")).type="submit",a.hidden=!0,this.appendChild(a),a.click(),this.removeChild(a))})}(HTMLFormElement.prototype);const submittersByForm=new WeakMap;function findSubmitterFromClickTarget(a){let c=a instanceof Element?a:a instanceof Node?a.parentElement:null,b=c?c.closest("input, button"):null;return(null==b?void 0:b.type)=="submit"?b:null}function clickCaptured(b){let a=findSubmitterFromClickTarget(b.target);a&&a.form&&submittersByForm.set(a.form,a)}!function(){if("submitter"in Event.prototype)return;let a;if("SubmitEvent"in window&&/Apple Computer/.test(navigator.vendor))a=window.SubmitEvent.prototype;else{if("SubmitEvent"in window)return;a=window.Event.prototype}addEventListener("click",clickCaptured,!0),Object.defineProperty(a,"submitter",{get(){if("submit"==this.type&&this.target instanceof HTMLFormElement)return submittersByForm.get(this.target)}})}(),function(a){a.eager="eager",a.lazy="lazy"}(FrameLoadingStyle||(FrameLoadingStyle={}));class FrameElement extends HTMLElement{constructor(){super(),this.loaded=Promise.resolve(),this.delegate=new FrameElement.delegateConstructor(this)}static get observedAttributes(){return["disabled","loading","src"]}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){let{src:a}=this;this.src=null,this.src=a}attributeChangedCallback(a){"loading"==a?this.delegate.loadingStyleChanged():"src"==a?this.delegate.sourceURLChanged():this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(a){a?this.setAttribute("src",a):this.removeAttribute("src")}get loading(){return frameLoadingStyleFromString(this.getAttribute("loading")||"")}set loading(a){a?this.setAttribute("loading",a):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(a){a?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(a){a?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){var a,b;return null===(b=null===(a=this.ownerDocument)|| void 0===a?void 0:a.documentElement)|| void 0===b?void 0:b.hasAttribute("data-turbo-preview")}}function frameLoadingStyleFromString(a){return"lazy"===a.toLowerCase()?FrameLoadingStyle.lazy:FrameLoadingStyle.eager}function expandURL(a){return new URL(a.toString(),document.baseURI)}function getAnchor(a){let b;return a.hash?a.hash.slice(1):(b=a.href.match(/#(.*)$/))?b[1]:void 0}function getAction(a,b){let c=(null==b?void 0:b.getAttribute("formaction"))||a.getAttribute("action")||a.action;return expandURL(c)}function getExtension(a){return(getLastPathComponent(a).match(/\.[^.]*$/)||[])[0]||""}function isHTML(a){return!!getExtension(a).match(/^(?:|\.(?:htm|html|xhtml))$/)}function isPrefixedBy(a,c){let b=getPrefix(c);return a.href===expandURL(b).href||a.href.startsWith(b)}function locationIsVisitable(a,b){return isPrefixedBy(a,b)&&isHTML(a)}function getRequestURL(a){let b=getAnchor(a);return null!=b?a.href.slice(0,-(b.length+1)):a.href}function toCacheKey(a){return getRequestURL(a)}function urlsAreEqual(a,b){return expandURL(a).href==expandURL(b).href}function getPathComponents(a){return a.pathname.split("/").slice(1)}function getLastPathComponent(a){return getPathComponents(a).slice(-1)[0]}function getPrefix(a){return addTrailingSlash(a.origin+a.pathname)}function addTrailingSlash(a){return a.endsWith("/")?a:a+"/"}class FetchResponse{constructor(a){this.response=a}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return expandURL(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(a){return this.response.headers.get(a)}}function dispatch(c,{target:a,cancelable:d,detail:e}={}){let b=new CustomEvent(c,{cancelable:d,bubbles:!0,detail:e});return a&&a.isConnected?a.dispatchEvent(b):document.documentElement.dispatchEvent(b),b}function nextAnimationFrame(){return new Promise(a=>requestAnimationFrame(()=>a()))}function nextEventLoopTick(){return new Promise(a=>setTimeout(()=>a(),0))}function nextMicrotask(){return Promise.resolve()}function parseHTMLDocument(a=""){return new DOMParser().parseFromString(a,"text/html")}function unindent(c,...d){let a=interpolate(c,d).replace(/^\n/,"").split("\n"),b=a[0].match(/^\s+/),e=b?b[0].length:0;return a.map(a=>a.slice(e)).join("\n")}function interpolate(a,b){return a.reduce((c,d,a)=>{let e=void 0==b[a]?"":b[a];return c+d+e},"")}function uuid(){return Array.apply(null,{length:36}).map((_,a)=>8==a||13==a||18==a||23==a?"-":14==a?"4":19==a?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16)).join("")}function getAttribute(c,...b){for(let a of b.map(a=>null==a?void 0:a.getAttribute(c)))if("string"==typeof a)return a;return null}function markAsBusy(...b){for(let a of b)"turbo-frame"==a.localName&&a.setAttribute("busy",""),a.setAttribute("aria-busy","true")}function clearBusyState(...b){for(let a of b)"turbo-frame"==a.localName&&a.removeAttribute("busy"),a.removeAttribute("aria-busy")}function fetchMethodFromString(a){switch(a.toLowerCase()){case"get":return FetchMethod.get;case"post":return FetchMethod.post;case"put":return FetchMethod.put;case"patch":return FetchMethod.patch;case"delete":return FetchMethod.delete}}!function(a){a[a.get=0]="get",a[a.post=1]="post",a[a.put=2]="put",a[a.patch=3]="patch",a[a.delete=4]="delete"}(FetchMethod||(FetchMethod={}));class FetchRequest{constructor(a,b,c,d=new URLSearchParams,e=null){this.abortController=new AbortController,this.resolveRequestPromise=a=>{},this.delegate=a,this.method=b,this.headers=this.defaultHeaders,this.body=d,this.url=c,this.target=e}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){var c,a;let{fetchOptions:d}=this;null===(a=(c=this.delegate).prepareHeadersForRequest)|| void 0===a||a.call(c,this.headers,this),await this.allowRequestToBeIntercepted(d);try{this.delegate.requestStarted(this);let e=await fetch(this.url.href,d);return await this.receive(e)}catch(b){if("AbortError"!==b.name)throw this.delegate.requestErrored(this,b),b}finally{this.delegate.requestFinished(this)}}async receive(b){let a=new FetchResponse(b),c=dispatch("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:a},target:this.target});return c.defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,a):a.succeeded?this.delegate.requestSucceededWithResponse(this,a):this.delegate.requestFailedWithResponse(this,a),a}get fetchOptions(){var a;return{method:FetchMethod[this.method].toUpperCase(),credentials:"same-origin",headers:this.headers,redirect:"follow",body:this.isIdempotent?null:this.body,signal:this.abortSignal,referrer:null===(a=this.delegate.referrer)|| void 0===a?void 0:a.href}}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isIdempotent(){return this.method==FetchMethod.get}get abortSignal(){return this.abortController.signal}async allowRequestToBeIntercepted(a){let b=new Promise(a=>this.resolveRequestPromise=a),c=dispatch("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:a,url:this.url,resume:this.resolveRequestPromise},target:this.target});c.defaultPrevented&&await b}}class AppearanceObserver{constructor(a,b){this.started=!1,this.intersect=b=>{let a=b.slice(-1)[0];(null==a?void 0:a.isIntersecting)&&this.delegate.elementAppearedInViewport(this.element)},this.delegate=a,this.element=b,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}}class StreamMessage{constructor(a){this.templateElement=document.createElement("template"),this.templateElement.innerHTML=a}static wrap(a){return"string"==typeof a?new this(a):a}get fragment(){let a=document.createDocumentFragment();for(let b of this.foreignElements)a.appendChild(document.importNode(b,!0));return a}get foreignElements(){return this.templateChildren.reduce((a,b)=>"turbo-stream"==b.tagName.toLowerCase()?[...a,b]:a,[])}get templateChildren(){return Array.from(this.templateElement.content.children)}}function formEnctypeFromString(a){switch(a.toLowerCase()){case FormEnctype.multipart:return FormEnctype.multipart;case FormEnctype.plain:return FormEnctype.plain;default:return FormEnctype.urlEncoded}}StreamMessage.contentType="text/vnd.turbo-stream.html",function(a){a[a.initialized=0]="initialized",a[a.requesting=1]="requesting",a[a.waiting=2]="waiting",a[a.receiving=3]="receiving",a[a.stopping=4]="stopping",a[a.stopped=5]="stopped"}(FormSubmissionState||(FormSubmissionState={})),function(a){a.urlEncoded="application/x-www-form-urlencoded",a.multipart="multipart/form-data",a.plain="text/plain"}(FormEnctype||(FormEnctype={}));class FormSubmission{constructor(c,a,b,d=!1){this.state=FormSubmissionState.initialized,this.delegate=c,this.formElement=a,this.submitter=b,this.formData=buildFormData(a,b),this.location=expandURL(this.action),this.method==FetchMethod.get&&mergeFormDataEntries(this.location,[...this.body.entries()]),this.fetchRequest=new FetchRequest(this,this.method,this.location,this.body,this.formElement),this.mustRedirect=d}static confirmMethod(a,b){return confirm(a)}get method(){var a;let b=(null===(a=this.submitter)|| void 0===a?void 0:a.getAttribute("formmethod"))||this.formElement.getAttribute("method")||"";return fetchMethodFromString(b.toLowerCase())||FetchMethod.get}get action(){var a;let b="string"==typeof this.formElement.action?this.formElement.action:null;return(null===(a=this.submitter)|| void 0===a?void 0:a.getAttribute("formaction"))||this.formElement.getAttribute("action")||b||""}get body(){return this.enctype==FormEnctype.urlEncoded||this.method==FetchMethod.get?new URLSearchParams(this.stringFormData):this.formData}get enctype(){var a;return formEnctypeFromString((null===(a=this.submitter)|| void 0===a?void 0:a.getAttribute("formenctype"))||this.formElement.enctype)}get isIdempotent(){return this.fetchRequest.isIdempotent}get stringFormData(){return[...this.formData].reduce((b,[c,a])=>b.concat("string"==typeof a?[[c,a]]:[]),[])}get confirmationMessage(){return this.formElement.getAttribute("data-turbo-confirm")}get needsConfirmation(){return null!==this.confirmationMessage}async start(){let{initialized:a,requesting:b}=FormSubmissionState;if(this.needsConfirmation){let c=FormSubmission.confirmMethod(this.confirmationMessage,this.formElement);if(!c)return}if(this.state==a)return this.state=b,this.fetchRequest.perform()}stop(){let{stopping:a,stopped:b}=FormSubmissionState;if(this.state!=a&&this.state!=b)return this.state=a,this.fetchRequest.cancel(),!0}prepareHeadersForRequest(a,c){if(!c.isIdempotent){let b=getCookieValue(getMetaContent("csrf-param"))||getMetaContent("csrf-token");b&&(a["X-CSRF-Token"]=b),a.Accept=[StreamMessage.contentType,a.Accept].join(", ")}}requestStarted(b){var a;this.state=FormSubmissionState.waiting,null===(a=this.submitter)|| void 0===a||a.setAttribute("disabled",""),dispatch("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(b,a){this.result={success:a.succeeded,fetchResponse:a}}requestSucceededWithResponse(b,a){if(a.clientError||a.serverError)this.delegate.formSubmissionFailedWithResponse(this,a);else if(this.requestMustRedirect(b)&&responseSucceededWithoutRedirect(a)){let c=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,c)}else this.state=FormSubmissionState.receiving,this.result={success:!0,fetchResponse:a},this.delegate.formSubmissionSucceededWithResponse(this,a)}requestFailedWithResponse(b,a){this.result={success:!1,fetchResponse:a},this.delegate.formSubmissionFailedWithResponse(this,a)}requestErrored(b,a){this.result={success:!1,error:a},this.delegate.formSubmissionErrored(this,a)}requestFinished(b){var a;this.state=FormSubmissionState.stopped,null===(a=this.submitter)|| void 0===a||a.removeAttribute("disabled"),dispatch("turbo:submit-end",{target:this.formElement,detail:Object.assign({formSubmission:this},this.result)}),this.delegate.formSubmissionFinished(this)}requestMustRedirect(a){return!a.isIdempotent&&this.mustRedirect}}function buildFormData(e,a){let b=new FormData(e),c=null==a?void 0:a.getAttribute("name"),d=null==a?void 0:a.getAttribute("value");return c&&null!=d&&b.get(c)!=d&&b.append(c,d),b}function getCookieValue(c){if(null!=c){let d=document.cookie?document.cookie.split("; "):[],a=d.find(a=>a.startsWith(c));if(a){let b=a.split("=").slice(1).join("=");return b?decodeURIComponent(b):void 0}}}function getMetaContent(b){let a=document.querySelector(`meta[name="${b}"]`);return a&&a.content}function responseSucceededWithoutRedirect(a){return 200==a.statusCode&&!a.redirected}function mergeFormDataEntries(a,d){let b=new URLSearchParams;for(let[e,c]of d)c instanceof File||b.append(e,c);return a.search=b.toString(),a}class Snapshot{constructor(a){this.element=a}get children(){return[...this.element.children]}hasAnchor(a){return null!=this.getElementForAnchor(a)}getElementForAnchor(a){return a?this.element.querySelector(`[id='${a}'], a[name='${a}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return this.element.querySelector("[autofocus]")}get permanentElements(){return[...this.element.querySelectorAll("[id][data-turbo-permanent]")]}getPermanentElementById(a){return this.element.querySelector(`#${a}[data-turbo-permanent]`)}getPermanentElementMapForSnapshot(e){let a={};for(let b of this.permanentElements){let{id:c}=b,d=e.getPermanentElementById(c);d&&(a[c]=[b,d])}return a}}class FormInterceptor{constructor(a,b){this.submitBubbled=a=>{let b=a.target;if(!a.defaultPrevented&&b instanceof HTMLFormElement&&b.closest("turbo-frame, html")==this.element){let c=a.submitter||void 0,d=(null==c?void 0:c.getAttribute("formmethod"))||b.method;"dialog"!=d&&this.delegate.shouldInterceptFormSubmission(b,c)&&(a.preventDefault(),a.stopImmediatePropagation(),this.delegate.formSubmissionIntercepted(b,c))}},this.delegate=a,this.element=b}start(){this.element.addEventListener("submit",this.submitBubbled)}stop(){this.element.removeEventListener("submit",this.submitBubbled)}}class View{constructor(a,b){this.resolveRenderPromise=a=>{},this.resolveInterceptionPromise=a=>{},this.delegate=a,this.element=b}scrollToAnchor(b){let a=this.snapshot.getElementForAnchor(b);a?(this.scrollToElement(a),this.focusElement(a)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(a){this.scrollToAnchor(getAnchor(a))}scrollToElement(a){a.scrollIntoView()}focusElement(a){a instanceof HTMLElement&&(a.hasAttribute("tabindex")?a.focus():(a.setAttribute("tabindex","-1"),a.focus(),a.removeAttribute("tabindex")))}scrollToPosition({x:a,y:b}){this.scrollRoot.scrollTo(a,b)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(a){let{isPreview:c,shouldRender:d,newSnapshot:b}=a;if(d)try{this.renderPromise=new Promise(a=>this.resolveRenderPromise=a),this.renderer=a,this.prepareToRenderSnapshot(a);let e=new Promise(a=>this.resolveInterceptionPromise=a),f=this.delegate.allowsImmediateRender(b,this.resolveInterceptionPromise);f||await e,await this.renderSnapshot(a),this.delegate.viewRenderedSnapshot(b,c),this.finishRenderingSnapshot(a)}finally{delete this.renderer,this.resolveRenderPromise(void 0),delete this.renderPromise}else this.invalidate()}invalidate(){this.delegate.viewInvalidated()}prepareToRenderSnapshot(a){this.markAsPreview(a.isPreview),a.prepareToRender()}markAsPreview(a){a?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}async renderSnapshot(a){await a.render()}finishRenderingSnapshot(a){a.finishRendering()}}class FrameView extends View{invalidate(){this.element.innerHTML=""}get snapshot(){return new Snapshot(this.element)}}class LinkInterceptor{constructor(a,b){this.clickBubbled=a=>{this.respondsToEventTarget(a.target)?this.clickEvent=a:delete this.clickEvent},this.linkClicked=a=>{this.clickEvent&&this.respondsToEventTarget(a.target)&&a.target instanceof Element&&this.delegate.shouldInterceptLinkClick(a.target,a.detail.url)&&(this.clickEvent.preventDefault(),a.preventDefault(),this.delegate.linkClickIntercepted(a.target,a.detail.url)),delete this.clickEvent},this.willVisit=()=>{delete this.clickEvent},this.delegate=a,this.element=b}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}respondsToEventTarget(a){let b=a instanceof Element?a:a instanceof Node?a.parentElement:null;return b&&b.closest("turbo-frame, html")==this.element}}class Bardo{constructor(a){this.permanentElementMap=a}static preservingPermanentElements(b,c){let a=new this(b);a.enter(),c(),a.leave()}enter(){for(let a in this.permanentElementMap){let[,b]=this.permanentElementMap[a];this.replaceNewPermanentElementWithPlaceholder(b)}}leave(){for(let b in this.permanentElementMap){let[a]=this.permanentElementMap[b];this.replaceCurrentPermanentElementWithClone(a),this.replacePlaceholderWithPermanentElement(a)}}replaceNewPermanentElementWithPlaceholder(a){let b=createPlaceholderForPermanentElement(a);a.replaceWith(b)}replaceCurrentPermanentElementWithClone(a){let b=a.cloneNode(!0);a.replaceWith(b)}replacePlaceholderWithPermanentElement(a){let b=this.getPlaceholderById(a.id);null==b||b.replaceWith(a)}getPlaceholderById(a){return this.placeholders.find(b=>b.content==a)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}}function createPlaceholderForPermanentElement(b){let a=document.createElement("meta");return a.setAttribute("name","turbo-permanent-placeholder"),a.setAttribute("content",b.id),a}class Renderer{constructor(a,b,c,d=!0){this.currentSnapshot=a,this.newSnapshot=b,this.isPreview=c,this.willRender=d,this.promise=new Promise((a,b)=>this.resolvingFunctions={resolve:a,reject:b})}get shouldRender(){return!0}prepareToRender(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}createScriptElement(b){if("false"==b.getAttribute("data-turbo-eval"))return b;{let a=document.createElement("script");return this.cspNonce&&(a.nonce=this.cspNonce),a.textContent=b.textContent,a.async=!1,copyElementAttributes(a,b),a}}preservingPermanentElements(a){Bardo.preservingPermanentElements(this.permanentElementMap,a)}focusFirstAutofocusableElement(){let a=this.connectedSnapshot.firstAutofocusableElement;elementIsFocusable(a)&&a.focus()}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get cspNonce(){var a;return null===(a=document.head.querySelector('meta[name="csp-nonce"]'))|| void 0===a?void 0:a.getAttribute("content")}}function copyElementAttributes(a,b){for(let{name:c,value:d}of[...b.attributes])a.setAttribute(c,d)}function elementIsFocusable(a){return a&&"function"==typeof a.focus}class FrameRenderer extends Renderer{get shouldRender(){return!0}async render(){await nextAnimationFrame(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await nextAnimationFrame(),this.focusFirstAutofocusableElement(),await nextAnimationFrame(),this.activateScriptElements()}loadFrameElement(){var a;let c=document.createRange();c.selectNodeContents(this.currentElement),c.deleteContents();let d=this.newElement,b=null===(a=d.ownerDocument)|| void 0===a?void 0:a.createRange();b&&(b.selectNodeContents(d),this.currentElement.appendChild(b.extractContents()))}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){let a=this.currentElement.firstElementChild,b=readScrollLogicalPosition(this.currentElement.getAttribute("data-autoscroll-block"),"end");if(a)return a.scrollIntoView({block:b}),!0}return!1}activateScriptElements(){for(let a of this.newScriptElements){let b=this.createScriptElement(a);a.replaceWith(b)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}}function readScrollLogicalPosition(a,b){return"end"==a||"start"==a||"center"==a||"nearest"==a?a:b}class ProgressBar{constructor(){this.hiding=!1,this.value=0,this.visible=!1,this.trickle=()=>{this.setValue(this.value+Math.random()/100)},this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}static get defaultCSS(){return unindent`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 2px;
        background: #333;
        z-index: 9999;
        transition:
          width ${ProgressBar.animationDuration}ms ease-out,
          opacity ${ProgressBar.animationDuration/2}ms ${ProgressBar.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(a){this.value=a,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(a){this.progressElement.style.opacity="0",setTimeout(a,1.5*ProgressBar.animationDuration)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,ProgressBar.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+90*this.value}%`})}createStylesheetElement(){let a=document.createElement("style");return a.type="text/css",a.textContent=ProgressBar.defaultCSS,a}createProgressElement(){let a=document.createElement("div");return a.className="turbo-progress-bar",a}}ProgressBar.animationDuration=300;class HeadSnapshot extends Snapshot{constructor(){super(...arguments),this.detailsByOuterHTML=this.children.filter(a=>!elementIsNoscript(a)).map(a=>elementWithoutNonce(a)).reduce((b,a)=>{let{outerHTML:c}=a,d=c in b?b[c]:{type:elementType(a),tracked:elementIsTracked(a),elements:[]};return Object.assign(Object.assign({},b),{[c]:Object.assign(Object.assign({},d),{elements:[...d.elements,a]})})},{})}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(a=>this.detailsByOuterHTML[a].tracked).join("")}getScriptElementsNotInSnapshot(a){return this.getElementsMatchingTypeNotInSnapshot("script",a)}getStylesheetElementsNotInSnapshot(a){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",a)}getElementsMatchingTypeNotInSnapshot(a,b){return Object.keys(this.detailsByOuterHTML).filter(a=>!(a in b.detailsByOuterHTML)).map(a=>this.detailsByOuterHTML[a]).filter(({type:b})=>b==a).map(({elements:[a]})=>a)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((a,c)=>{let{type:d,tracked:e,elements:b}=this.detailsByOuterHTML[c];return null!=d||e?b.length>1?[...a,...b.slice(1)]:a:[...a,...b]},[])}getMetaValue(b){let a=this.findMetaElementByName(b);return a?a.getAttribute("content"):null}findMetaElementByName(a){return Object.keys(this.detailsByOuterHTML).reduce((c,d)=>{let{elements:[b]}=this.detailsByOuterHTML[d];return elementIsMetaElementWithName(b,a)?b:c},void 0)}}function elementType(a){return elementIsScript(a)?"script":elementIsStylesheet(a)?"stylesheet":void 0}function elementIsTracked(a){return"reload"==a.getAttribute("data-turbo-track")}function elementIsScript(a){let b=a.tagName.toLowerCase();return"script"==b}function elementIsNoscript(a){let b=a.tagName.toLowerCase();return"noscript"==b}function elementIsStylesheet(a){let b=a.tagName.toLowerCase();return"style"==b||"link"==b&&"stylesheet"==a.getAttribute("rel")}function elementIsMetaElementWithName(a,b){let c=a.tagName.toLowerCase();return"meta"==c&&a.getAttribute("name")==b}function elementWithoutNonce(a){return a.hasAttribute("nonce")&&a.setAttribute("nonce",""),a}class PageSnapshot extends Snapshot{constructor(a,b){super(a),this.headSnapshot=b}static fromHTMLString(a=""){return this.fromDocument(parseHTMLDocument(a))}static fromElement(a){return this.fromDocument(a.ownerDocument)}static fromDocument({head:a,body:b}){return new this(b,new HeadSnapshot(a))}clone(){return new PageSnapshot(this.element.cloneNode(!0),this.headSnapshot)}get headElement(){return this.headSnapshot.element}get rootLocation(){var a;let b=null!==(a=this.getSetting("root"))&& void 0!==a?a:"/";return expandURL(b)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return"no-preview"!=this.cacheControlValue}get isCacheable(){return"no-cache"!=this.cacheControlValue}get isVisitable(){return"reload"!=this.getSetting("visit-control")}getSetting(a){return this.headSnapshot.getMetaValue(`turbo-${a}`)}}!function(a){a.visitStart="visitStart",a.requestStart="requestStart",a.requestEnd="requestEnd",a.visitEnd="visitEnd"}(TimingMetric||(TimingMetric={})),function(a){a.initialized="initialized",a.started="started",a.canceled="canceled",a.failed="failed",a.completed="completed"}(VisitState||(VisitState={}));const defaultOptions={action:"advance",historyChanged:!1,visitCachedSnapshot(){},willRender:!0};!function(a){a[a.networkFailure=0]="networkFailure",a[a.timeoutFailure=-1]="timeoutFailure",a[a.contentTypeMismatch=-2]="contentTypeMismatch"}(SystemStatusCode||(SystemStatusCode={}));class Visit{constructor(b,c,d,e={}){this.identifier=uuid(),this.timingMetrics={},this.followedRedirect=!1,this.historyChanged=!1,this.scrolled=!1,this.snapshotCached=!1,this.state=VisitState.initialized,this.delegate=b,this.location=c,this.restorationIdentifier=d||uuid();let{action:f,historyChanged:g,referrer:h,snapshotHTML:i,response:j,visitCachedSnapshot:k,willRender:a}=Object.assign(Object.assign({},defaultOptions),e);this.action=f,this.historyChanged=g,this.referrer=h,this.snapshotHTML=i,this.response=j,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.visitCachedSnapshot=k,this.willRender=a,this.scrolled=!a}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==VisitState.initialized&&(this.recordTimingMetric(TimingMetric.visitStart),this.state=VisitState.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==VisitState.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=VisitState.canceled)}complete(){this.state==VisitState.started&&(this.recordTimingMetric(TimingMetric.visitEnd),this.state=VisitState.completed,this.adapter.visitCompleted(this),this.delegate.visitCompleted(this),this.followRedirect())}fail(){this.state==VisitState.started&&(this.state=VisitState.failed,this.adapter.visitFailed(this))}changeHistory(){var a;if(!this.historyChanged){let b=this.location.href===(null===(a=this.referrer)|| void 0===a?void 0:a.href)?"replace":this.action,c=this.getHistoryMethodForAction(b);this.history.update(c,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new FetchRequest(this,FetchMethod.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(TimingMetric.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(a=this.response){if(this.response=a,a){let{statusCode:b}=a;isSuccessful(b)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,b)}}finishRequest(){this.recordTimingMetric(TimingMetric.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){let{statusCode:a,responseHTML:b}=this.response;this.render(async()=>{this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,isSuccessful(a)&&null!=b?(await this.view.renderPage(PageSnapshot.fromHTMLString(b),!1,this.willRender),this.adapter.visitRendered(this),this.complete()):(await this.view.renderError(PageSnapshot.fromHTMLString(b)),this.adapter.visitRendered(this),this.fail())})}}getCachedSnapshot(){let a=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(a&&(!getAnchor(this.location)||a.hasAnchor(getAnchor(this.location)))&&("restore"==this.action||a.isPreviewable))return a}getPreloadedSnapshot(){if(this.snapshotHTML)return PageSnapshot.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return null!=this.getCachedSnapshot()}loadCachedSnapshot(){let a=this.getCachedSnapshot();if(a){let b=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.view.renderPage(a,b,this.willRender),this.adapter.visitRendered(this),b||this.complete())})}}followRedirect(){var a;this.redirectedToLocation&&!this.followedRedirect&&(null===(a=this.response)|| void 0===a?void 0:a.redirected)&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.adapter.visitRendered(this)})}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(a,b){}async requestSucceededWithResponse(e,a){let b=await a.responseHTML,{redirected:c,statusCode:d}=a;void 0==b?this.recordResponse({statusCode:SystemStatusCode.contentTypeMismatch,redirected:c}):(this.redirectedToLocation=a.redirected?a.location:void 0,this.recordResponse({statusCode:d,responseHTML:b,redirected:c}))}async requestFailedWithResponse(e,a){let b=await a.responseHTML,{redirected:c,statusCode:d}=a;void 0==b?this.recordResponse({statusCode:SystemStatusCode.contentTypeMismatch,redirected:c}):this.recordResponse({statusCode:d,responseHTML:b,redirected:c})}requestErrored(a,b){this.recordResponse({statusCode:SystemStatusCode.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){this.scrolled||("restore"==this.action?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){let{scrollPosition:a}=this.restorationData;if(a)return this.view.scrollToPosition(a),!0}scrollToAnchor(){let a=getAnchor(this.location);if(null!=a)return this.view.scrollToAnchor(a),!0}recordTimingMetric(a){this.timingMetrics[a]=new Date().getTime()}getTimingMetrics(){return Object.assign({},this.timingMetrics)}getHistoryMethodForAction(a){switch(a){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return"object"==typeof this.response}shouldIssueRequest(){return!this.isSamePage&&("restore"==this.action?!this.hasCachedSnapshot():this.willRender)}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot().then(a=>a&&this.visitCachedSnapshot(a)),this.snapshotCached=!0)}async render(a){this.cancelRender(),await new Promise(a=>{this.frame=requestAnimationFrame(()=>a())}),await a(),delete this.frame,this.performScroll()}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}}function isSuccessful(a){return a>=200&&a<300}class BrowserAdapter{constructor(a){this.progressBar=new ProgressBar,this.showProgressBar=()=>{this.progressBar.show()},this.session=a}visitProposedToLocation(a,b){this.navigator.startVisit(a,uuid(),b)}visitStarted(a){a.loadCachedSnapshot(),a.issueRequest(),a.changeHistory(),a.goToSamePageAnchor()}visitRequestStarted(a){this.progressBar.setValue(0),a.hasCachedSnapshot()||"restore"!=a.action?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(a){a.loadResponse()}visitRequestFailedWithStatusCode(a,b){switch(b){case SystemStatusCode.networkFailure:case SystemStatusCode.timeoutFailure:case SystemStatusCode.contentTypeMismatch:return this.reload();default:return a.loadResponse()}}visitRequestFinished(a){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitCompleted(a){}pageInvalidated(){this.reload()}visitFailed(a){}visitRendered(a){}formSubmissionStarted(a){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(a){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),null!=this.visitProgressBarTimeout&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){null==this.formProgressBarTimeout&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),null!=this.formProgressBarTimeout&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}reload(){window.location.reload()}get navigator(){return this.session.navigator}}class CacheObserver{constructor(){this.started=!1}start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeStaleElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeStaleElements,!1))}removeStaleElements(){let a=[...document.querySelectorAll('[data-turbo-cache="false"]')];for(let b of a)b.remove()}}class FormSubmitObserver{constructor(a){this.started=!1,this.submitCaptured=()=>{removeEventListener("submit",this.submitBubbled,!1),addEventListener("submit",this.submitBubbled,!1)},this.submitBubbled=a=>{if(!a.defaultPrevented){let b=a.target instanceof HTMLFormElement?a.target:void 0,c=a.submitter||void 0;if(b){let d=(null==c?void 0:c.getAttribute("formmethod"))||b.getAttribute("method");"dialog"!=d&&this.delegate.willSubmitForm(b,c)&&(a.preventDefault(),this.delegate.formSubmitted(b,c))}}},this.delegate=a}start(){this.started||(addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}}class FrameRedirector{constructor(a){this.element=a,this.linkInterceptor=new LinkInterceptor(this,a),this.formInterceptor=new FormInterceptor(this,a)}start(){this.linkInterceptor.start(),this.formInterceptor.start()}stop(){this.linkInterceptor.stop(),this.formInterceptor.stop()}shouldInterceptLinkClick(a,b){return this.shouldRedirect(a)}linkClickIntercepted(a,c){let b=this.findFrameElement(a);b&&b.delegate.linkClickIntercepted(a,c)}shouldInterceptFormSubmission(a,b){return this.shouldSubmit(a,b)}formSubmissionIntercepted(b,c){let a=this.findFrameElement(b,c);a&&(a.removeAttribute("reloadable"),a.delegate.formSubmissionIntercepted(b,c))}shouldSubmit(b,c){var a;let e=getAction(b,c),d=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),f=expandURL(null!==(a=null==d?void 0:d.content)&& void 0!==a?a:"/");return this.shouldRedirect(b,c)&&locationIsVisitable(e,f)}shouldRedirect(a,c){let b=this.findFrameElement(a,c);return!!b&&b!=a.closest("turbo-frame")}findFrameElement(d,b){let a=(null==b?void 0:b.getAttribute("data-turbo-frame"))||d.getAttribute("data-turbo-frame");if(a&&"_top"!=a){let c=this.element.querySelector(`#${a}:not([disabled])`);if(c instanceof FrameElement)return c}}}class History{constructor(a){this.restorationIdentifier=uuid(),this.restorationData={},this.started=!1,this.pageLoaded=!1,this.onPopState=c=>{if(this.shouldHandlePopState()){let{turbo:a}=c.state||{};if(a){this.location=new URL(window.location.href);let{restorationIdentifier:b}=a;this.restorationIdentifier=b,this.delegate.historyPoppedToLocationWithRestorationIdentifier(this.location,b)}}},this.onPageLoad=async a=>{await nextMicrotask(),this.pageLoaded=!0},this.delegate=a}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(a,b){this.update(history.pushState,a,b)}replace(a,b){this.update(history.replaceState,a,b)}update(c,a,b=uuid()){c.call(history,{turbo:{restorationIdentifier:b}},"",a.href),this.location=a,this.restorationIdentifier=b}getRestorationDataForIdentifier(a){return this.restorationData[a]||{}}updateRestorationData(b){let{restorationIdentifier:a}=this,c=this.restorationData[a];this.restorationData[a]=Object.assign(Object.assign({},c),b)}assumeControlOfScrollRestoration(){var a;this.previousScrollRestoration||(this.previousScrollRestoration=null!==(a=history.scrollRestoration)&& void 0!==a?a:"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||"complete"==document.readyState}}class LinkClickObserver{constructor(a){this.started=!1,this.clickCaptured=()=>{removeEventListener("click",this.clickBubbled,!1),addEventListener("click",this.clickBubbled,!1)},this.clickBubbled=a=>{if(this.clickEventIsSignificant(a)){let d=a.composedPath&&a.composedPath()[0]||a.target,b=this.findLinkFromClickTarget(d);if(b){let c=this.getLocationForLink(b);this.delegate.willFollowLinkToLocation(b,c)&&(a.preventDefault(),this.delegate.followedLinkToLocation(b,c))}}},this.delegate=a}start(){this.started||(addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(a){return!(a.target&&a.target.isContentEditable||a.defaultPrevented||a.which>1||a.altKey||a.ctrlKey||a.metaKey||a.shiftKey)}findLinkFromClickTarget(a){if(a instanceof Element)return a.closest("a[href]:not([target^=_]):not([download])")}getLocationForLink(a){return expandURL(a.getAttribute("href")||"")}}function isAction(a){return"advance"==a||"replace"==a||"restore"==a}class Navigator{constructor(a){this.delegate=a}proposeVisit(a,b={}){this.delegate.allowsVisitingLocationWithAction(a,b.action)&&(locationIsVisitable(a,this.view.snapshot.rootLocation)?this.delegate.visitProposedToLocation(a,b):window.location.href=a.toString())}startVisit(a,b,c={}){this.stop(),this.currentVisit=new Visit(this,expandURL(a),b,Object.assign({referrer:this.location},c)),this.currentVisit.start()}submitForm(a,b){this.stop(),this.formSubmission=new FormSubmission(this,a,b,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}formSubmissionStarted(a){"function"==typeof this.adapter.formSubmissionStarted&&this.adapter.formSubmissionStarted(a)}async formSubmissionSucceededWithResponse(a,b){if(a==this.formSubmission){let c=await b.responseHTML;if(c){a.method!=FetchMethod.get&&this.view.clearSnapshotCache();let{statusCode:d,redirected:e}=b,f=this.getActionForFormSubmission(a),g={action:f,response:{statusCode:d,responseHTML:c,redirected:e}};this.proposeVisit(b.location,g)}}}async formSubmissionFailedWithResponse(d,a){let b=await a.responseHTML;if(b){let c=PageSnapshot.fromHTMLString(b);a.serverError?await this.view.renderError(c):await this.view.renderPage(c),this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(b,a){console.error(a)}formSubmissionFinished(a){"function"==typeof this.adapter.formSubmissionFinished&&this.adapter.formSubmissionFinished(a)}visitStarted(a){this.delegate.visitStarted(a)}visitCompleted(a){this.delegate.visitCompleted(a)}locationWithActionIsSamePage(b,c){let a=getAnchor(b),d=getAnchor(this.view.lastRenderedLocation);return"replace"!==c&&getRequestURL(b)===getRequestURL(this.view.lastRenderedLocation)&&("restore"===c&& void 0===a||null!=a&&a!==d)}visitScrolledToSamePageLocation(a,b){this.delegate.visitScrolledToSamePageLocation(a,b)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}getActionForFormSubmission(b){let{formElement:c,submitter:d}=b,a=getAttribute("data-turbo-action",d,c);return isAction(a)?a:"advance"}}!function(a){a[a.initial=0]="initial",a[a.loading=1]="loading",a[a.interactive=2]="interactive",a[a.complete=3]="complete"}(PageStage||(PageStage={}));class PageObserver{constructor(a){this.stage=PageStage.initial,this.started=!1,this.interpretReadyState=()=>{let{readyState:a}=this;"interactive"==a?this.pageIsInteractive():"complete"==a&&this.pageIsComplete()},this.pageWillUnload=()=>{this.delegate.pageWillUnload()},this.delegate=a}start(){this.started||(this.stage==PageStage.initial&&(this.stage=PageStage.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}pageIsInteractive(){this.stage==PageStage.loading&&(this.stage=PageStage.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==PageStage.interactive&&(this.stage=PageStage.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}}class ScrollObserver{constructor(a){this.started=!1,this.onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},this.delegate=a}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(a){this.delegate.scrollPositionChanged(a)}}class StreamObserver{constructor(a){this.sources=new Set,this.started=!1,this.inspectFetchResponse=b=>{let a=fetchResponseFromEvent(b);a&&fetchResponseIsStream(a)&&(b.preventDefault(),this.receiveMessageResponse(a))},this.receiveMessageEvent=a=>{this.started&&"string"==typeof a.data&&this.receiveMessageHTML(a.data)},this.delegate=a}start(){this.started||(this.started=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(a){this.streamSourceIsConnected(a)||(this.sources.add(a),a.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(a){this.streamSourceIsConnected(a)&&(this.sources.delete(a),a.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(a){return this.sources.has(a)}async receiveMessageResponse(b){let a=await b.responseHTML;a&&this.receiveMessageHTML(a)}receiveMessageHTML(a){this.delegate.receivedMessageFromStream(new StreamMessage(a))}}function fetchResponseFromEvent(c){var a;let b=null===(a=c.detail)|| void 0===a?void 0:a.fetchResponse;if(b instanceof FetchResponse)return b}function fetchResponseIsStream(b){var a;let c=null!==(a=b.contentType)&& void 0!==a?a:"";return c.startsWith(StreamMessage.contentType)}class ErrorRenderer extends Renderer{async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){let{documentElement:a,head:b,body:c}=document;a.replaceChild(this.newHead,b),a.replaceChild(this.newElement,c)}activateScriptElements(){for(let a of this.scriptElements){let b=a.parentNode;if(b){let c=this.createScriptElement(a);b.replaceChild(c,a)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return[...document.documentElement.querySelectorAll("script")]}}class PageRenderer extends Renderer{get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}prepareToRender(){this.mergeHead()}async render(){this.willRender&&this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}mergeHead(){this.copyNewHeadStylesheetElements(),this.copyNewHeadScriptElements(),this.removeCurrentHeadProvisionalElements(),this.copyNewHeadProvisionalElements()}replaceBody(){this.preservingPermanentElements(()=>{this.activateNewBody(),this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}copyNewHeadStylesheetElements(){for(let a of this.newHeadStylesheetElements)document.head.appendChild(a)}copyNewHeadScriptElements(){for(let a of this.newHeadScriptElements)document.head.appendChild(this.createScriptElement(a))}removeCurrentHeadProvisionalElements(){for(let a of this.currentHeadProvisionalElements)document.head.removeChild(a)}copyNewHeadProvisionalElements(){for(let a of this.newHeadProvisionalElements)document.head.appendChild(a)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(let a of this.newBodyScriptElements){let b=this.createScriptElement(a);a.replaceWith(b)}}assignNewBody(){document.body&&this.newElement instanceof HTMLBodyElement?document.body.replaceWith(this.newElement):document.documentElement.appendChild(this.newElement)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}}class SnapshotCache{constructor(a){this.keys=[],this.snapshots={},this.size=a}has(a){return toCacheKey(a) in this.snapshots}get(a){if(this.has(a)){let b=this.read(a);return this.touch(a),b}}put(a,b){return this.write(a,b),this.touch(a),b}clear(){this.snapshots={}}read(a){return this.snapshots[toCacheKey(a)]}write(a,b){this.snapshots[toCacheKey(a)]=b}touch(c){let a=toCacheKey(c),b=this.keys.indexOf(a);b> -1&&this.keys.splice(b,1),this.keys.unshift(a),this.trim()}trim(){for(let a of this.keys.splice(this.size))delete this.snapshots[a]}}class PageView extends View{constructor(){super(...arguments),this.snapshotCache=new SnapshotCache(10),this.lastRenderedLocation=new URL(location.href)}renderPage(a,b=!1,c=!0){let d=new PageRenderer(this.snapshot,a,b,c);return this.render(d)}renderError(a){let b=new ErrorRenderer(this.snapshot,a,!1);return this.render(b)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(){if(this.shouldCacheSnapshot){this.delegate.viewWillCacheSnapshot();let{snapshot:b,lastRenderedLocation:c}=this;await nextEventLoopTick();let a=b.clone();return this.snapshotCache.put(c,a),a}}getCachedSnapshotForLocation(a){return this.snapshotCache.get(a)}get snapshot(){return PageSnapshot.fromElement(this.element)}get shouldCacheSnapshot(){return this.snapshot.isCacheable}}class Session{constructor(){this.navigator=new Navigator(this),this.history=new History(this),this.view=new PageView(this,document.documentElement),this.adapter=new BrowserAdapter(this),this.pageObserver=new PageObserver(this),this.cacheObserver=new CacheObserver,this.linkClickObserver=new LinkClickObserver(this),this.formSubmitObserver=new FormSubmitObserver(this),this.scrollObserver=new ScrollObserver(this),this.streamObserver=new StreamObserver(this),this.frameRedirector=new FrameRedirector(document.documentElement),this.drive=!0,this.enabled=!0,this.progressBarDelay=500,this.started=!1}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.started=!1)}registerAdapter(a){this.adapter=a}visit(a,b={}){this.navigator.proposeVisit(expandURL(a),b)}connectStreamSource(a){this.streamObserver.connectStreamSource(a)}disconnectStreamSource(a){this.streamObserver.disconnectStreamSource(a)}renderStreamMessage(a){document.documentElement.appendChild(StreamMessage.wrap(a).fragment)}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(a){this.progressBarDelay=a}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}historyPoppedToLocationWithRestorationIdentifier(a,b){this.enabled?this.navigator.startVisit(a,b,{action:"restore",historyChanged:!0}):this.adapter.pageInvalidated()}scrollPositionChanged(a){this.history.updateRestorationData({scrollPosition:a})}willFollowLinkToLocation(a,b){return this.elementDriveEnabled(a)&&locationIsVisitable(b,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(a,b)}followedLinkToLocation(a,b){let c=this.getActionForLink(a);this.convertLinkWithMethodClickToFormSubmission(a)||this.visit(b.href,{action:c})}convertLinkWithMethodClickToFormSubmission(b){let c=b.getAttribute("data-turbo-method");if(!c)return!1;{let a=document.createElement("form");a.method=c,a.action=b.getAttribute("href")||"undefined",a.hidden=!0,b.hasAttribute("data-turbo-confirm")&&a.setAttribute("data-turbo-confirm",b.getAttribute("data-turbo-confirm"));let d=this.getTargetFrameForLink(b);return d?(a.setAttribute("data-turbo-frame",d),a.addEventListener("turbo:submit-start",()=>a.remove())):a.addEventListener("submit",()=>a.remove()),document.body.appendChild(a),dispatch("submit",{cancelable:!0,target:a})}}allowsVisitingLocationWithAction(a,b){return this.locationWithActionIsSamePage(a,b)||this.applicationAllowsVisitingLocation(a)}visitProposedToLocation(a,b){extendURLWithDeprecatedProperties(a),this.adapter.visitProposedToLocation(a,b)}visitStarted(a){extendURLWithDeprecatedProperties(a.location),a.silent||this.notifyApplicationAfterVisitingLocation(a.location,a.action)}visitCompleted(a){this.notifyApplicationAfterPageLoad(a.getTimingMetrics())}locationWithActionIsSamePage(a,b){return this.navigator.locationWithActionIsSamePage(a,b)}visitScrolledToSamePageLocation(a,b){this.notifyApplicationAfterVisitingSamePageLocation(a,b)}willSubmitForm(b,a){let c=getAction(b,a);return this.elementDriveEnabled(b)&&(!a||this.elementDriveEnabled(a))&&locationIsVisitable(expandURL(c),this.snapshot.rootLocation)}formSubmitted(a,b){this.navigator.submitForm(a,b)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(a){this.renderStreamMessage(a)}viewWillCacheSnapshot(){var a;(null===(a=this.navigator.currentVisit)|| void 0===a?void 0:a.silent)||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:a},b){let c=this.notifyApplicationBeforeRender(a,b);return!c.defaultPrevented}viewRenderedSnapshot(a,b){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender()}viewInvalidated(){this.adapter.pageInvalidated()}frameLoaded(a){this.notifyApplicationAfterFrameLoad(a)}frameRendered(a,b){this.notifyApplicationAfterFrameRender(a,b)}applicationAllowsFollowingLinkToLocation(a,b){let c=this.notifyApplicationAfterClickingLinkToLocation(a,b);return!c.defaultPrevented}applicationAllowsVisitingLocation(a){let b=this.notifyApplicationBeforeVisitingLocation(a);return!b.defaultPrevented}notifyApplicationAfterClickingLinkToLocation(a,b){return dispatch("turbo:click",{target:a,detail:{url:b.href},cancelable:!0})}notifyApplicationBeforeVisitingLocation(a){return dispatch("turbo:before-visit",{detail:{url:a.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(a,b){return markAsBusy(document.documentElement),dispatch("turbo:visit",{detail:{url:a.href,action:b}})}notifyApplicationBeforeCachingSnapshot(){return dispatch("turbo:before-cache")}notifyApplicationBeforeRender(a,b){return dispatch("turbo:before-render",{detail:{newBody:a,resume:b},cancelable:!0})}notifyApplicationAfterRender(){return dispatch("turbo:render")}notifyApplicationAfterPageLoad(a={}){return clearBusyState(document.documentElement),dispatch("turbo:load",{detail:{url:this.location.href,timing:a}})}notifyApplicationAfterVisitingSamePageLocation(a,b){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:a.toString(),newURL:b.toString()}))}notifyApplicationAfterFrameLoad(a){return dispatch("turbo:frame-load",{target:a})}notifyApplicationAfterFrameRender(a,b){return dispatch("turbo:frame-render",{detail:{fetchResponse:a},target:b,cancelable:!0})}elementDriveEnabled(b){let a=null==b?void 0:b.closest("[data-turbo]");return this.drive?!a||"false"!=a.getAttribute("data-turbo"):!!a&&"true"==a.getAttribute("data-turbo")}getActionForLink(b){let a=b.getAttribute("data-turbo-action");return isAction(a)?a:"advance"}getTargetFrameForLink(a){let b=a.getAttribute("data-turbo-frame");if(b)return b;{let c=a.closest("turbo-frame");if(c)return c.id}}get snapshot(){return this.view.snapshot}}function extendURLWithDeprecatedProperties(a){Object.defineProperties(a,deprecatedLocationPropertyDescriptors)}const deprecatedLocationPropertyDescriptors={absoluteURL:{get(){return this.toString()}}},session=new Session,{navigator:navigator$1}=session;function start(){session.start()}function registerAdapter(a){session.registerAdapter(a)}function visit(a,b){session.visit(a,b)}function connectStreamSource(a){session.connectStreamSource(a)}function disconnectStreamSource(a){session.disconnectStreamSource(a)}function renderStreamMessage(a){session.renderStreamMessage(a)}function clearCache(){session.clearCache()}function setProgressBarDelay(a){session.setProgressBarDelay(a)}function setConfirmMethod(a){FormSubmission.confirmMethod=a}var FrameLoadingStyle,FetchMethod,FormSubmissionState,FormEnctype,TimingMetric,VisitState,SystemStatusCode,PageStage,Turbo=Object.freeze({__proto__:null,navigator:navigator$1,session:session,PageRenderer:PageRenderer,PageSnapshot:PageSnapshot,start:start,registerAdapter:registerAdapter,visit:visit,connectStreamSource:connectStreamSource,disconnectStreamSource:disconnectStreamSource,renderStreamMessage:renderStreamMessage,clearCache:clearCache,setProgressBarDelay:setProgressBarDelay,setConfirmMethod:setConfirmMethod});class FrameController{constructor(a){this.fetchResponseLoaded=a=>{},this.currentFetchRequest=null,this.resolveVisitPromise=()=>{},this.connected=!1,this.hasBeenLoaded=!1,this.settingSourceURL=!1,this.element=a,this.view=new FrameView(this,this.element),this.appearanceObserver=new AppearanceObserver(this,this.element),this.linkInterceptor=new LinkInterceptor(this,this.element),this.formInterceptor=new FormInterceptor(this,this.element)}connect(){this.connected||(this.connected=!0,this.reloadable=!1,this.loadingStyle==FrameLoadingStyle.lazy&&this.appearanceObserver.start(),this.linkInterceptor.start(),this.formInterceptor.start(),this.sourceURLChanged())}disconnect(){this.connected&&(this.connected=!1,this.appearanceObserver.stop(),this.linkInterceptor.stop(),this.formInterceptor.stop())}disabledChanged(){this.loadingStyle==FrameLoadingStyle.eager&&this.loadSourceURL()}sourceURLChanged(){(this.loadingStyle==FrameLoadingStyle.eager||this.hasBeenLoaded)&&this.loadSourceURL()}loadingStyleChanged(){this.loadingStyle==FrameLoadingStyle.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.loadSourceURL())}async loadSourceURL(){if(!this.settingSourceURL&&this.enabled&&this.isActive&&(this.reloadable||this.sourceURL!=this.currentURL)){let a=this.currentURL;if(this.currentURL=this.sourceURL,this.sourceURL)try{this.element.loaded=this.visit(expandURL(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.hasBeenLoaded=!0}catch(b){throw this.currentURL=a,b}}}async loadResponse(a){(a.redirected||a.succeeded&&a.isHTML)&&(this.sourceURL=a.response.url);try{let b=await a.responseHTML;if(b){let{body:c}=parseHTMLDocument(b),d=new Snapshot(await this.extractForeignFrameElement(c)),e=new FrameRenderer(this.view.snapshot,d,!1,!1);this.view.renderPromise&&await this.view.renderPromise,await this.view.render(e),session.frameRendered(a,this.element),session.frameLoaded(this.element),this.fetchResponseLoaded(a)}}catch(f){console.error(f),this.view.invalidate()}finally{this.fetchResponseLoaded=()=>{}}}elementAppearedInViewport(a){this.loadSourceURL()}shouldInterceptLinkClick(a,b){return!a.hasAttribute("data-turbo-method")&&this.shouldInterceptNavigation(a)}linkClickIntercepted(a,b){this.reloadable=!0,this.navigateFrame(a,b)}shouldInterceptFormSubmission(a,b){return this.shouldInterceptNavigation(a,b)}formSubmissionIntercepted(b,c){this.formSubmission&&this.formSubmission.stop(),this.reloadable=!1,this.formSubmission=new FormSubmission(this,b,c);let{fetchRequest:a}=this.formSubmission;this.prepareHeadersForRequest(a.headers,a),this.formSubmission.start()}prepareHeadersForRequest(a,b){a["Turbo-Frame"]=this.id}requestStarted(a){markAsBusy(this.element)}requestPreventedHandlingResponse(a,b){this.resolveVisitPromise()}async requestSucceededWithResponse(b,a){await this.loadResponse(a),this.resolveVisitPromise()}requestFailedWithResponse(b,a){console.error(a),this.resolveVisitPromise()}requestErrored(b,a){console.error(a),this.resolveVisitPromise()}requestFinished(a){clearBusyState(this.element)}formSubmissionStarted({formElement:a}){markAsBusy(a,this.findFrameElement(a))}formSubmissionSucceededWithResponse(a,c){let b=this.findFrameElement(a.formElement,a.submitter);this.proposeVisitIfNavigatedWithAction(b,a.formElement,a.submitter),b.delegate.loadResponse(c)}formSubmissionFailedWithResponse(b,a){this.element.delegate.loadResponse(a)}formSubmissionErrored(b,a){console.error(a)}formSubmissionFinished({formElement:a}){clearBusyState(a,this.findFrameElement(a))}allowsImmediateRender(a,b){return!0}viewRenderedSnapshot(a,b){}viewInvalidated(){}async visit(b){var a;let c=new FetchRequest(this,FetchMethod.get,b,new URLSearchParams,this.element);return null===(a=this.currentFetchRequest)|| void 0===a||a.cancel(),this.currentFetchRequest=c,new Promise(a=>{this.resolveVisitPromise=()=>{this.resolveVisitPromise=()=>{},this.currentFetchRequest=null,a()},c.perform()})}navigateFrame(b,d,c){let a=this.findFrameElement(b,c);this.proposeVisitIfNavigatedWithAction(a,b,c),a.setAttribute("reloadable",""),a.src=d}proposeVisitIfNavigatedWithAction(a,b,c){let d=getAttribute("data-turbo-action",c,b,a);if(isAction(d)){let{visitCachedSnapshot:e}=new SnapshotSubstitution(a);a.delegate.fetchResponseLoaded=b=>{if(a.src){let{statusCode:c,redirected:f}=b,g=a.ownerDocument.documentElement.outerHTML,h={statusCode:c,redirected:f,responseHTML:g};session.visit(a.src,{action:d,response:h,visitCachedSnapshot:e,willRender:!1})}}}}findFrameElement(b,c){var a;let d=getAttribute("data-turbo-frame",c,b)||this.element.getAttribute("target");return null!==(a=getFrameElementById(d))&& void 0!==a?a:this.element}async extractForeignFrameElement(c){let a,b=CSS.escape(this.id);try{if(a=activateElement(c.querySelector(`turbo-frame#${b}`),this.currentURL))return a;if(a=activateElement(c.querySelector(`turbo-frame[src][recurse~=${b}]`),this.currentURL))return await a.loaded,await this.extractForeignFrameElement(a);console.error(`Response has no matching <turbo-frame id="${b}"> element`)}catch(d){console.error(d)}return new FrameElement}formActionIsVisitable(a,b){let c=getAction(a,b);return locationIsVisitable(expandURL(c),this.rootLocation)}shouldInterceptNavigation(a,b){let c=getAttribute("data-turbo-frame",b,a)||this.element.getAttribute("target");if(a instanceof HTMLFormElement&&!this.formActionIsVisitable(a,b)|| !this.enabled||"_top"==c)return!1;if(c){let d=getFrameElementById(c);if(d)return!d.disabled}return!!(session.elementDriveEnabled(a)&&(!b||session.elementDriveEnabled(b)))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}get reloadable(){let a=this.findFrameElement(this.element);return a.hasAttribute("reloadable")}set reloadable(b){let a=this.findFrameElement(this.element);b?a.setAttribute("reloadable",""):a.removeAttribute("reloadable")}set sourceURL(a){this.settingSourceURL=!0,this.element.src=null!=a?a:null,this.currentURL=this.element.src,this.settingSourceURL=!1}get loadingStyle(){return this.element.loading}get isLoading(){return void 0!==this.formSubmission|| void 0!==this.resolveVisitPromise()}get isActive(){return this.element.isActive&&this.connected}get rootLocation(){var a;let b=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),c=null!==(a=null==b?void 0:b.content)&& void 0!==a?a:"/";return expandURL(c)}}class SnapshotSubstitution{constructor(a){this.visitCachedSnapshot=({element:b})=>{var a;let{id:c,clone:d}=this;null===(a=b.querySelector("#"+c))|| void 0===a||a.replaceWith(d)},this.clone=a.cloneNode(!0),this.id=a.id}}function getFrameElementById(a){if(null!=a){let b=document.getElementById(a);if(b instanceof FrameElement)return b}}function activateElement(a,b){if(a){let c=a.getAttribute("src");if(null!=c&&null!=b&&urlsAreEqual(c,b))throw new Error(`Matching <turbo-frame id="${a.id}"> element has a source URL which references itself`);if(a.ownerDocument!==document&&(a=document.importNode(a,!0)),a instanceof FrameElement)return a.connectedCallback(),a.disconnectedCallback(),a}}const StreamActions={after(){this.targetElements.forEach(b=>{var a;return null===(a=b.parentElement)|| void 0===a?void 0:a.insertBefore(this.templateContent,b.nextSibling)})},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(a=>a.append(this.templateContent))},before(){this.targetElements.forEach(b=>{var a;return null===(a=b.parentElement)|| void 0===a?void 0:a.insertBefore(this.templateContent,b)})},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(a=>a.prepend(this.templateContent))},remove(){this.targetElements.forEach(a=>a.remove())},replace(){this.targetElements.forEach(a=>a.replaceWith(this.templateContent))},update(){this.targetElements.forEach(a=>{a.innerHTML="",a.append(this.templateContent)})}};class StreamElement extends HTMLElement{async connectedCallback(){try{await this.render()}catch(a){console.error(a)}finally{this.disconnect()}}async render(){var a;return null!==(a=this.renderPromise)&& void 0!==a?a:this.renderPromise=(async()=>{this.dispatchEvent(this.beforeRenderEvent)&&(await nextAnimationFrame(),this.performAction())})()}disconnect(){try{this.remove()}catch(a){}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(a=>a.remove())}get duplicateChildren(){var a;let b=this.targetElements.flatMap(a=>[...a.children]).filter(a=>!!a.id),c=[...null===(a=this.templateContent)|| void 0===a?void 0:a.children].filter(a=>!!a.id).map(a=>a.id);return b.filter(a=>c.includes(a.id))}get performAction(){if(this.action){let a=StreamActions[this.action];if(a)return a;this.raise("unknown action")}this.raise("action attribute is missing")}get targetElements(){return this.target?this.targetElementsById:this.targets?this.targetElementsByQuery:void this.raise("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.raise("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}raise(a){throw new Error(`${this.description}: ${a}`)}get description(){var a,b;return null!==(b=(null!==(a=this.outerHTML.match(/<[^>]+>/))&& void 0!==a?a:[])[0])&& void 0!==b?b:"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0})}get targetElementsById(){var a;let b=null===(a=this.ownerDocument)|| void 0===a?void 0:a.getElementById(this.target);return null!==b?[b]:[]}get targetElementsByQuery(){var a;let b=null===(a=this.ownerDocument)|| void 0===a?void 0:a.querySelectorAll(this.targets);return 0!==b.length?Array.prototype.slice.call(b):[]}}FrameElement.delegateConstructor=FrameController,customElements.define("turbo-frame",FrameElement),customElements.define("turbo-stream",StreamElement),(()=>{let a=document.currentScript;if(a&&!a.hasAttribute("data-turbo-suppress-warning")){for(;a=a.parentElement;)if(a==document.body)return console.warn(unindent`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applicationâs JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        ââ
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,a.outerHTML)}})(),window.Turbo=Turbo,start()